function e(e,t){e.strokeRect(-t.wheel_diameter/2,-t.wheel_width/2,t.wheel_diameter,t.wheel_width)}function t(t,a){t.resetTransform(),t.clearRect(0,0,480,480),t.translate(240,240),t.scale(40,-40),t.lineJoin="round";t.lineWidth=.02,t.translate(a.x,a.y),t.rotate(a.theta),t.beginPath(),t.arc(0,0,.05,0,2*Math.PI),t.fill(),function(e,t){e.strokeRect(-(t.box_length-t.L)/2,-t.box_width/2,t.box_length,t.box_width)}(t,a),t.save(),t.translate(0,a.gauge/2),e(t,a),t.restore(),t.save(),t.translate(0,-a.gauge/2),e(t,a),t.restore();let i=0,n=0,o=1/0;0!=a.phi&&(o=a.L/Math.tan(Math.abs(a.phi)),i=Math.sign(a.phi)*Math.atan(a.L/(o+a.gauge/2)),n=Math.sign(a.phi)*Math.atan(a.L/(o-a.gauge/2))),t.save(),t.strokeStyle="red",t.beginPath(),isFinite(o)?t.arc(0,Math.sign(a.phi)*o,o,0,2*Math.PI):(t.moveTo(-1e3,0),t.lineTo(1e3,0)),t.stroke(),t.closePath(),t.restore(),t.save(),t.translate(a.L,a.gauge/2),t.rotate(a.phi>0?n:i),e(t,a),t.restore(),t.save(),t.translate(a.L,-a.gauge/2),t.rotate(a.phi>0?i:n),e(t,a),t.restore()}!function(){const e={L:3,box_length:4,box_width:2,wheel_width:.25,wheel_diameter:.75,gauge:1.5,x:0,y:0,theta:Math.PI/2,s:0,phi:0},a=document.getElementById("simulation").getContext("2d");a&&t(a,e);let i,n,o=!1,h=!1,r=!1,s=!1;window.addEventListener("keydown",(e=>{"ArrowLeft"===e.key&&(o=!0),"ArrowRight"===e.key&&(h=!0),"ArrowUp"===e.key&&(r=!0),"ArrowDown"===e.key&&(s=!0),(o||h||r||s)&&window.requestAnimationFrame(w)})),window.addEventListener("keyup",(e=>{"ArrowLeft"===e.key&&(o=!1),"ArrowRight"===e.key&&(h=!1),"ArrowUp"===e.key&&(r=!1),"ArrowDown"===e.key&&(s=!1)}));let l=!1;function w(g){void 0===i&&(i=g);const d=g-n;isFinite(d)&&n!==g&&(l||(e.x+=d/400*e.s*Math.cos(e.theta),e.y+=d/400*e.s*Math.sin(e.theta),e.theta+=d/400*e.s/e.L*Math.tan(e.phi),console.log(e.s),console.log(e.theta),console.log(e.x),o&&(e.phi+=d/1e3),h&&(e.phi-=d/1e3),e.phi=Math.min(e.phi,.4*Math.PI),e.phi=Math.max(e.phi,.4*-Math.PI),e.s=r?1:s?-1:0),a&&t(a,e)),n=g,o||h||r||s?(window.requestAnimationFrame(w),l=!1):l=!0}window.requestAnimationFrame(w)}();
//# sourceMappingURL=index.379ce807.js.map
